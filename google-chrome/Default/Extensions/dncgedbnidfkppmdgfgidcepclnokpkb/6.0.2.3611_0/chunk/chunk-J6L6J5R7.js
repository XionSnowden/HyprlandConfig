import{a as w}from"./chunk-DQXOKHFD.js";import{a as x}from"./chunk-NNBWZ6HI.js";import{b as I}from"./chunk-WFJOWCXF.js";import{f as T,h as C}from"./chunk-CM6X6NVN.js";var S=T((L,y)=>{"use strict";var P=Object.prototype.hasOwnProperty,h="~";function m(){}Object.create&&(m.prototype=Object.create(null),new m().__proto__||(h=!1));function V(i,t,e){this.fn=i,this.context=t,this.once=e||!1}function R(i,t,e,r,n){if(typeof e!="function")throw new TypeError("The listener must be a function");var o=new V(e,r||i,n),u=h?h+t:t;return i._events[u]?i._events[u].fn?i._events[u]=[i._events[u],o]:i._events[u].push(o):(i._events[u]=o,i._eventsCount++),i}function _(i,t){--i._eventsCount==0?i._events=new m:delete i._events[t]}function c(){this._events=new m,this._eventsCount=0}c.prototype.eventNames=function(){var t=[],e,r;if(this._eventsCount===0)return t;for(r in e=this._events)P.call(e,r)&&t.push(h?r.slice(1):r);return Object.getOwnPropertySymbols?t.concat(Object.getOwnPropertySymbols(e)):t};c.prototype.listeners=function(t){var e=h?h+t:t,r=this._events[e];if(!r)return[];if(r.fn)return[r.fn];for(var n=0,o=r.length,u=new Array(o);n<o;n++)u[n]=r[n].fn;return u};c.prototype.listenerCount=function(t){var e=h?h+t:t,r=this._events[e];return r?r.fn?1:r.length:0};c.prototype.emit=function(t,e,r,n,o,u){var f=h?h+t:t;if(!this._events[f])return!1;var s=this._events[f],p=arguments.length,d,a;if(s.fn){switch(s.once&&this.removeListener(t,s.fn,void 0,!0),p){case 1:return s.fn.call(s.context),!0;case 2:return s.fn.call(s.context,e),!0;case 3:return s.fn.call(s.context,e,r),!0;case 4:return s.fn.call(s.context,e,r,n),!0;case 5:return s.fn.call(s.context,e,r,n,o),!0;case 6:return s.fn.call(s.context,e,r,n,o,u),!0}for(a=1,d=new Array(p-1);a<p;a++)d[a-1]=arguments[a];s.fn.apply(s.context,d)}else{var v=s.length,g;for(a=0;a<v;a++)switch(s[a].once&&this.removeListener(t,s[a].fn,void 0,!0),p){case 1:s[a].fn.call(s[a].context);break;case 2:s[a].fn.call(s[a].context,e);break;case 3:s[a].fn.call(s[a].context,e,r);break;case 4:s[a].fn.call(s[a].context,e,r,n);break;default:if(!d)for(g=1,d=new Array(p-1);g<p;g++)d[g-1]=arguments[g];s[a].fn.apply(s[a].context,d)}}return!0};c.prototype.on=function(t,e,r){return R(this,t,e,r,!1)};c.prototype.once=function(t,e,r){return R(this,t,e,r,!0)};c.prototype.removeListener=function(t,e,r,n){var o=h?h+t:t;if(!this._events[o])return this;if(!e)return _(this,o),this;var u=this._events[o];if(u.fn)u.fn===e&&(!n||u.once)&&(!r||u.context===r)&&_(this,o);else{for(var f=0,s=[],p=u.length;f<p;f++)(u[f].fn!==e||n&&!u[f].once||r&&u[f].context!==r)&&s.push(u[f]);s.length?this._events[o]=s.length===1?s[0]:s:_(this,o)}return this};c.prototype.removeAllListeners=function(t){var e;return t?(e=h?h+t:t,this._events[e]&&_(this,e)):(this._events=new m,this._eventsCount=0),this};c.prototype.off=c.prototype.removeListener;c.prototype.addListener=c.prototype.on;c.prefixed=h;c.EventEmitter=c;typeof y!="undefined"&&(y.exports=c)});var E=C(S());var b=Object.freeze({NUMERIC:"numeric",TEXT:"text"}),j=0,l=(i,t=!1)=>{let e={};return e.get=function(){let n;try{n=this.group[i]}catch(o){console.error(`Group Property: "${i}" Read Error: ${o}`),console.error(o)}return n},t&&(e.set=function(n){try{this.group[i]=n,this.emit(`${i}-changed`,n)}catch(o){console.error(`Group Property: "${i}"" Write Error: ${o}`),console.error(o)}}),e},k=class extends E.default{constructor({id:t=`${j++}`,color:e=null,liveValue:r=0,groupId:n="",objectId:o=0,setId:u="",symbol:f="circle",values:s=[],updatedRows:p=null,getGroupFn:d=null,getDataSetFn:a=null,getSpecialFn:v=null,context:g=-1,dataType:N=b.NUMERIC,struckRows:F=[],frozen:A=!1}){super();this.frozen=!1;this._id=t,this._color=e,this._groupId=n,this._objectId=o,this._setId=u,this._symbol=f,this._liveValue=r,this._values=s,this._updatedRows=p,this.getGroupFn=d,this.getDataSetFn=a,this.getSpecialFn=v,this.precision.on("updated",()=>this.emit("format-string-changed",this.precision.formatStr)),this._context=g,this._dataType=N,this._struckRows=F,this.frozen=A}static isValueEmpty(t){return[void 0,null].includes(t)||Number.isNaN(t)}get color(){return this._color}set color(t){t!==this._color&&(this._color=t,this.emit("color-changed",this.color))}get filteredValues(){return this.hasStruckRows?this._values.filter((t,e)=>!this.isRowStruck(e)):this._values}get symbol(){return this._symbol}set symbol(t){let e=Number.isInteger(t)?w(t):t;e!==this._symbol&&(this._symbol=e,this.emit("symbol-changed",this.symbol))}get dataSet(){return(this.getDataSetFn||(()=>null))(this)}get id(){return this._id}get special(){return(this.getSpecialFn||(()=>null))(this)}get formatStr(){return this.precision.formatStr}set formatStr(t){this.precision.formatStr=t}get group(){return(this.getGroupFn||(()=>null))(this)}get groupId(){return this._groupId}set groupId(t){this._groupId=t,this.emit("group-id-changed",this.groupId)}get liveValue(){return this._liveValue}set liveValue(t){this._liveValue=t,this.emit("live-value-changed",t)}get objectId(){return this._objectId}set objectId(t){this._objectId=t}get setId(){return this._setId}set setId(t){this._setId=t,this.emit("set-id-changed",this.setId)}get values(){return this._values}set values(t){this._values=t,this.emit("values-changed",this.values)}get updatedRows(){return this._updatedRows}set updatedRows(t){this._updatedRows=t,this.emit("updated-rows-changed",this.updatedRows)}replaceAllValues(t){this.values=[],this.updatedRows=[],this.values=t,this.updatedRows=Array.from(Array(t.length).keys())}get context(){return this._context}get dataType(){return this._dataType}set dataType(t){t!==this._dataType&&this.emit("column-dataType-updated",t),this._dataType=t}get isNumeric(){return this._dataType===b.NUMERIC}get isCategorical(){return this._dataType===b.TEXT}get hasStruckRows(){return this._struckRows.length>0}set struckRows(t){this._struckRows=[...t],this.emit("strikethrough-changed")}get struckRows(){return[...this._struckRows]}isRowStruck(t){return this._struckRows.includes(t)}getFormattedValue(t){if(typeof t!="number"||Number.isNaN(t))return null;let e=I(this.formatStr,t);return x.checkNegativeZero(t,e)}setName(t){this.name=t}setValuesByRow(t,e){let r=Math.min(t.length,e.length);for(let n=0;n<r;++n){let o=e[n];o===null&&(o=NaN),this.values[t[n]]=o}for(let n=0;n<this.values.length;++n)this.values[n]===void 0&&(this.values[n]=NaN);this.emit("row-values-updated",t,this)}get valueRange(){let t=Number.MAX_VALUE,e=-Number.MAX_VALUE;return this.values.forEach(r=>{t=Math.min(r,t),e=Math.max(r,e)}),{min:t,max:e}}};Object.defineProperties(k.prototype,{allowAutomaticPrecision:l("allowAutomaticPrecision"),automaticPrecision:l("automaticPrecision"),autoscaleFromZero:l("autoscaleFromZero",!0),deletable:l("deletable",!0),direction:l("direction",!0),editable:l("editable",!0),name:l("name",!0),metered:l("metered",!0),meterId:l("meterId"),plotted:l("plotted",!0),precision:l("precision",!1),prefersBase:l("prefersBase",!0),range:l("range",!0),replaceDependent:l("replaceDependent",!0),sensorId:l("sensorId"),sensorMapId:l("sensorMapId"),smaxy:l("smaxy",!0),type:l("type",!1),units:l("units",!0),wavelength:l("wavelength",!0)});export{S as a,b,k as c};
