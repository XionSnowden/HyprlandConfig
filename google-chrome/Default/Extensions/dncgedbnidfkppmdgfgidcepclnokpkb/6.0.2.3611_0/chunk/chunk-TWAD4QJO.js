import{e as c,j as f,l as g}from"./chunk-IMQHRNK4.js";import{a as n}from"./chunk-LI3RKPGW.js";import{a as d}from"./chunk-3AUSJ54I.js";import{h as p}from"./chunk-CM6X6NVN.js";var i=p(d());var h="resources/featureflags.json",s={feature:[]},o={feature:[]},u={feature:[]},l=i.default.name==="Chrome"&&window.chrome&&window.chrome.storage,F={getFF(){return new Promise(a=>{window.chrome.storage.local.get("userFeatureFlags",e=>{g(e)?a(null):a(e.userFeatureFlags)})})},setFF(a){return new Promise(e=>{window.chrome.storage.local.set({userFeatureFlags:a},()=>{e()})})},removeFF(){return new Promise(a=>{window.chrome.storage.local.remove("userFeatureFlags",()=>{a()})})}},w=()=>{let a={feature:[]};o&&o.feature?s.feature.forEach(e=>{let t=o.feature.find(r=>r.name===e.name);t?a.feature.push(t):a.feature.push(e)}):a=s,u=c(a)},b=async()=>{let a=await n.get(h),e=l?await F.getFF():localStorage.getItem("userFeatureFlags");a&&(s=JSON.parse(a)),(e&&l||e&&!l)&&(o=JSON.parse(e)),w()};b();var E=()=>u,O=()=>s,v=a=>f(u.feature.map(t=>[t.name,t.enabled]))[a],y=async a=>{let e={feature:[]};s.feature.forEach(t=>{let r=a.feature.find(m=>m.name===t.name);r&&r.enabled!==t.enabled&&e.feature.push(r)}),l?e.feature.length?await F.setFF(JSON.stringify(e)):await F.removeFF():e.feature.length?localStorage.setItem("userFeatureFlags",JSON.stringify(e)):localStorage.removeItem("userFeatureFlags")};export{E as a,O as b,v as c,y as d};
