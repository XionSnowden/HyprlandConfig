import{b as m,c as p,d as V,e as D,f as x}from"./chunk-SEYYHBSH.js";import{a as k,b as w,c as A}from"./chunk-XJAAGGJ2.js";import{e as P}from"./chunk-BVG7RORO.js";var b=(s,f,c)=>{let d=new Map;for(let n=f;n<=c;n++)d.set(s[n],n);return d},L=w(class extends A{constructor(s){if(super(s),s.type!==k.CHILD)throw Error("repeat() can only be used in text expressions")}ht(s,f,c){let d;c===void 0?c=f:f!==void 0&&(d=f);let n=[],e=[],i=0;for(let a of s)n[i]=d?d(a,i):i,e[i]=c(a,i),i++;return{values:e,keys:n}}render(s,f,c){return this.ht(s,f,c).values}update(s,[f,c,d]){var n;let e=D(s),{values:i,keys:a}=this.ht(f,c,d);if(!Array.isArray(e))return this.ut=a,i;let v=(n=this.ut)!==null&&n!==void 0?n:this.ut=[],u=[],y,j,t=0,l=e.length-1,r=0,o=i.length-1;for(;t<=l&&r<=o;)if(e[t]===null)t++;else if(e[l]===null)l--;else if(v[t]===a[r])u[r]=p(e[t],i[r]),t++,r++;else if(v[l]===a[o])u[o]=p(e[l],i[o]),l--,o--;else if(v[t]===a[o])u[o]=p(e[t],i[o]),m(s,u[o+1],e[t]),t++,o--;else if(v[l]===a[r])u[r]=p(e[l],i[r]),m(s,e[t],e[l]),l--,r++;else if(y===void 0&&(y=b(a,r,o),j=b(v,t,l)),y.has(v[t]))if(y.has(v[l])){let h=j.get(a[r]),g=h!==void 0?e[h]:null;if(g===null){let C=m(s,e[t]);p(C,i[r]),u[r]=C}else u[r]=p(g,i[r]),m(s,e[t],g),e[h]=null;r++}else x(e[l]),l--;else x(e[t]),t++;for(;r<=o;){let h=m(s,u[o+1]);p(h,i[r]),u[r++]=h}for(;t<=l;){let h=e[t++];h!==null&&x(h)}return this.ut=a,V(s,u),P}});export{L as a};
/**
 * @license
 * Copyright 2017 Google LLC
 * SPDX-License-Identifier: BSD-3-Clause
 */
