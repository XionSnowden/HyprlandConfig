import{a as d,c as m,d as S}from"./chunk-IBBROPNX.js";import{e as r,z as c}from"./chunk-IMQHRNK4.js";import{a as o,d as n,j as h}from"./chunk-SSPC3AL5.js";import{a as i,b as l}from"./chunk-CM6X6NVN.js";var p={interpolate:!1,tangentEnabled:!1},f={examineHidden:!0,xPosition:0,closestXPt:0,isGestureFinished:!0,isRangeIndexBased:!1},u={analysisType:"",autoGenerated:!1,curveFitType:"",highlightOnly:!1,id:"",isRangeIndexBased:!1,manualFitId:null,permanent:!1,range:void 0,showUncertainty:!1},g=class{constructor(e,t){this.examineSettings=i({},p);this.examinePosition=i({},f);this.selections={};h(this,{examineSettings:o,examinePosition:o,selections:o,reset:n,updateExamineSettings:n,updateExaminePosition:n,createSelection:n,modifySelection:n,deleteSelection:n}),this.graphId=e,this.analysisLinksStore=t,this.analysisLinksStore?.registerAnalysisStore(e,this)}reset(){this.examineSettings=i({},p),this.examinePosition=i({},f),this.manualFitPosition={},this.selections={}}updateExamineSettings(e={}){this.examineSettings=i(i({},this.examineSettings),e)}updateExaminePosition(e={},t=!1){this.examinePosition=i(i({},this.examinePosition),e),t||this.analysisLinksStore?.updateLinkedExaminePositions(this.graphId,e)}createSelection(e={},t=c){let s=e.id??t("selection-");this.selections=d(this.selections,s,l(i(i({},u),e),{id:s}))}modifySelection(e,t){let s=t.permanent&&!this.selections[e].permanent;this.selections=S(this.selections,e,r(t)),s?this.analysisLinksStore?.deleteLinkedSelections(this.graphId):this.analysisLinksStore?.updateLinkedSelections(this.graphId)}deleteSelection(e){let t=!this.selections[e].permanent;this.selections=m(this.selections,e),t&&this.analysisLinksStore?.deleteLinkedSelections(this.graphId)}handleNewSelectionGesture({dragRange:e,isRangeIndexBased:t}){let s=Object.values(this.selections).find(a=>!a.permanent&&!a.highlightOnly);s?this.modifySelection(s.id,{range:e,isRangeIndexBased:t}):(this.analysisLinksStore?.deleteLinkedSelections(this.graphId),this.createSelection({range:e,permanent:!1,isRangeIndexBased:t})),this.analysisLinksStore?.updateLinkedSelections(this.graphId)}deleteTempSelection(){let e=Object.values(this.selections).find(t=>!t.permanent);e&&this.deleteSelection(e.id)}};export{p as a,f as b,g as c};
