function a(e){return new Promise((t,i)=>{e.file(t,i)})}function u(e){return new Promise((t,i)=>{window.requestFileSystem(LocalFileSystem.PERSISTENT,0,s=>{s.root.getFile(e,{create:!1,exclusive:!1},r=>r.isFile?(async()=>{t(await a(r))})():t(!1),()=>{t(!1)})})})}function w(e){return new Promise((t,i)=>{window.requestFileSystem(LocalFileSystem.PERSISTENT,0,s=>{s.root.getFile(e,{create:!1,exclusive:!1},r=>r.isFile?(async()=>{let o=await a(r),n=new FileReader;n.onload=({target:{result:c}})=>{t(JSON.parse(c))},n.readAsText(o)})():i(!1))})})}function l(e,t,i){return new Promise((s,r)=>{e.createWriter(async o=>{if(o.onerror=r,i)try{o.seek(o.length)}catch(n){console.error("file doesn't exist!")}await o.write(t),e.file(s)})})}function F(e,t){return new Promise((i,s)=>{window.requestFileSystem(LocalFileSystem.PERSISTENT,0,r=>{r.root.getFile(e,{create:!0,exclusive:!1},o=>{if(!t&&!o.isFile)return console.error(`Could not retrieve or cache ${e}. Please connect to the internet to get ${e}.`);(async()=>{let n=await l(o,t);i(n)})()})})})}export{a,u as b,w as c,l as d,F as e};
