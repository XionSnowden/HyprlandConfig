import{c as r,h as o}from"./chunk-BVG7RORO.js";import{a as d}from"./chunk-3AUSJ54I.js";import{h as a}from"./chunk-CM6X6NVN.js";var l=a(d()),s=class extends o{firstUpdated(){this.isIOS=l.default.os.family==="iOS",this.formEl=this.querySelector("form"),this.nestedInputLabelEls=[],this._preventDefault=e=>{e.preventDefault()},this.formEl?(this.inputEls=Array.from(this.formEl.querySelectorAll("input[type=text], input[type=number]")),this.inputEls.forEach(e=>{e.addEventListener("invalid",this._inputInvalidHandler.bind(this,e)),e.addEventListener("focus",this._inputFocusHandler.bind(this,e))}),this.isIOS&&this.formEl.querySelectorAll("input[type=radio], input[type=checkbox]").forEach(t=>{if(!t.disabled&&t.id){let i=this.formEl.querySelector(`label[for=${t.id}]`);i&&(i.querySelector("input[type=radio], input[type=checkbox]")||(this.nestedInputLabelEls.push(i),i.addEventListener("click",s._nestedLabelClickHandler.bind(this,t))))}}),this.formEl.addEventListener("submit",this._formSubmitHandler.bind(this,this.formEl))):console.warn("No <form> element is included inside your vst-ui-form. You should have one for accesibility purposes.")}_inputInvalidHandler(e,t){t.preventDefault(),this.showValidationMessage(e)}_inputFocusHandler(e){this.isAndroid?(e.addEventListener("contextmenu",this._preventDefault),e.select(),requestAnimationFrame(()=>{e.removeEventListener("contextmenu",this._preventDefault)})):e.select()}static _nestedLabelClickHandler(e,t){t.preventDefault(),e.click()}_formSubmitHandler(e,t){t.preventDefault(),t.stopPropagation(),e.checkValidity()&&this.dispatchEvent(new Event("submit"))}showValidationMessage(e){import("./vst-ui-tooltip-CRZHHIPK.js");let t=document.createElement("vst-ui-tooltip");t.content=e.validationMessage,t.for=e,t.type="error",t.manual=!0,this.appendChild(t),setTimeout(()=>{t.isShowing=!0}),e.focus(),["input","focus"].forEach(i=>{e.addEventListener(i,function n(){t&&t.remove(),e.removeEventListener(i,n,!0)},!0)})}disconnectedCallback(){this.inputEls?.forEach(e=>{e.removeEventListener("invalid",this._inputInvalidHandler.bind(this,e)),e.removeEventListener("focus",this._inputFocusHandler.bind(this,e))}),this.nestedInputLabelEls?.forEach(e=>{e.removeEventListener("click",s._nestedLabelClickHandler.bind(this,e))}),this.formEl?.removeEventListener("submit",this._formSubmitHandler.bind(this,this.formEl))}render(){return r`<slot></slot>`}};customElements.define("vst-ui-form",s);export{s as a};
