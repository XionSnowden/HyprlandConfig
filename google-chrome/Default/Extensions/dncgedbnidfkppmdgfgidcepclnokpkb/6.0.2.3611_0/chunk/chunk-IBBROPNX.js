function l(n,e,i){e=typeof e=="number"?c(e.toString()):typeof e=="string"?c(e):e;var t=function(r,s,u,f){var y,a=s[f];return s.length>f?(Array.isArray(r)?(a=g(a,r),y=r.slice()):y=Object.assign({},r),y[a]=t(r[a]!==void 0?r[a]:{},s,u,f+1),y):typeof u=="function"?u(r):u};return t(n,e,i,0)}function A(n,e,i){e=typeof e=="number"?c(e.toString()):typeof e=="string"?c(e):e;for(var t=0;t<e.length;t++){if(typeof n!="object")return i;var r=e[t];Array.isArray(n)&&r==="$end"&&(r=n.length-1),n=n[r]}return typeof n=="undefined"?i:n}function d(n,e){e=typeof e=="number"?c(e.toString()):typeof e=="string"?c(e):e;var i=function(t,r,s){var u,f=r[s];return typeof t!="object"||!Array.isArray(t)&&t[f]===void 0?t:r.length-1>s?(Array.isArray(t)?(f=g(f,t),u=t.slice()):u=Object.assign({},t),u[f]=i(t[f],r,s+1),u):(Array.isArray(t)?(f=g(f,t),u=[].concat(t.slice(0,f),t.slice(f+1))):(u=Object.assign({},t),delete u[f]),u)};return i(n,e,0)}function m(n,e,i){var t=A(n,e);if(typeof t=="object"){if(Array.isArray(t))return l(n,e,t.concat(i));if(t===null)return l(n,e,i);var r=Object.assign({},t,i);return l(n,e,r)}else return typeof t=="undefined"?l(n,e,i):n}function g(n,e){if(n==="$end"&&(n=Math.max(e.length-1,0)),!/^\+?\d+$/.test(n))throw new Error("Array index '"+n+"' has to be an integer");return parseInt(n)}function c(n){return n.split(".").reduce(function(e,i,t,r){var s=t>0&&r[t-1];return s&&/(?:^|[^\\])\\$/.test(s)?(e.pop(),e.push(s.slice(0,-1)+"."+i)):e.push(i),e},[])}export{l as a,A as b,d as c,m as d};
