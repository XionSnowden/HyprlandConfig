import{a as V}from"./chunk-J6L6J5R7.js";import{a as U}from"./chunk-YJ5KKARE.js";import{a as m}from"./chunk-NNBWZ6HI.js";import{b as f}from"./chunk-WFJOWCXF.js";import{h as _}from"./chunk-CM6X6NVN.js";function j(c){if(!c)return c;let t=c.indexOf(",")>-1?",":" ",e=c.substr(5).split(")")[0].split(t),i=(+e[0]).toString(16),r=(+e[1]).toString(16),s=(+e[2]).toString(16);return i.length===1&&(i=`0${i}`),r.length===1&&(r=`0${r}`),s.length===1&&(s=`0${s}`),`#${i}${r}${s}`}function G(c,t=1){let[e,i,r]=c.match(/\w\w/g).map(s=>parseInt(s,16));return`rgba(${e},${i},${r},${t})`}function Z(c){let t=c.startsWith("#")?G(c):c,e=t.includes(",")?",":" ",[i,r,s,n=255]=t.substring(5,t.length-1).split(e).filter(o=>o!=="/").map((o,l)=>{if(l===3){let h=parseFloat(o);return o.endsWith("%")?h/100:h}return parseInt(o,10)});return[i,r,s,n]}function z(c,t=0){let e=Z(c),[i,r,s]=e,n=e.at(3);i/=255,r/=255,s/=255;let o=Math.min(i,r,s),l=Math.max(i,r,s),h=l-o,a=0,d=0,u=0;return h===0?a=0:l===i?a=(r-s)/h%6:l===r?a=(s-i)/h+2:l===s&&(a=(i-r)/h+4),a=Math.round(a*60),u=(l+o)/2,d=h===0?0:h/(1-Math.abs(2*u-1)),u=+(u*100).toFixed(1),d=+(d*100).toFixed(1),a+=t,a%=360,a<0&&(a+=360),`hsla(${a} ${d}% ${u}% / ${n})`}var b=_(V());var S=_(U()),g=class extends S.default{constructor({precision:t=3,useSigFigs:e=!1,useSciNotation:i=!1}){super();this._precision=t,this._useSigFigs=e,this._useSciNotation=i,this._formatStr="",this.updateFormatString()}get precision(){return this._precision}set precision(t){this._precision=t,this.updateFormatString()}get useSigFigs(){return this._useSigFigs}set useSigFigs(t){this._useSigFigs=t,this.updateFormatString()}get useSciNotation(){return this._useSciNotation}set useSciNotation(t){this._useSciNotation=t,this.updateFormatString()}get formatStr(){return this._formatStr}set formatStr(t){this._formatStr=t}updateFormatString(){let t;return this.useSciNotation?t=`%.${this.precision}e`:this.useSigFigs?t=`%.${this.precision}g`:t=`%.${this.precision}f`,this._formatStr=t,this.emit("updated",t),t}update(t){["useSigFigs","precision","useSciNotation"].forEach(e=>{e in t&&(this[`_${e}`]=t[e])}),this.updateFormatString()}};var p=Object.freeze({NONE:0,FIXED:1,PERCENTAGE:2,COLUMN:3}),H=0,O=class extends b.default{constructor({id:t=`${H++}`,automaticPrecision:e=!1,autoscaleFromZero:i=!1,calcCoefficients:r=null,calcDependentGroups:s=null,calcEquation:n="",customEq:o="",calcUserEditable:l=!1,color:h="",deletable:a=!1,editable:d=!1,errorBarColumnId:u="",errorBarType:E=p.NONE,errorBarValue:F=0,getAllColumnsFn:P=null,metered:I=!1,meterId:C=void 0,name:$="",plotted:B=!0,precision:x=1,prefersBase:y=!1,range:v=null,replaceDependent:N=!1,smaxy:w=0,sensorId:A=-1,sensorMapId:q="",type:D="",units:M="",wavelength:T=void 0}){super();this._automaticPrecision=e,this._autoscaleFromZero=i,this._calcCoefficients=r,this._calcDependentGroups=s,this._calcEquation=n,this._customEq=o,this._calcUserEditable=l,this._color=h,this._deletable=a,this._direction=void 0,this._editable=d,this._errorBarColumnId=u,this._errorBarType=E,this._errorBarValue=F,this._getAllColumnsFn=P,this._id=t,this._metered=I,this._meterId=C,this._name=$,this._plotted=B,this._prefersBase=y,this._range=v,this._replaceDependent=N,this._smaxy=w,this._sensorId=A,this._sensorMapId=q,this._type=D,this._units=M,this._wavelength=T,this._precision=new g(x),this._precision.on("updated",()=>{this.emit("precision-changed",this._precision)})}get allColumns(){return(this._getAllColumnsFn||(()=>[]))(this)}get allowAutomaticPrecision(){return this.type==="manual"||this.type==="event"}get automaticPrecision(){return this.allowAutomaticPrecision&&this._automaticPrecision}set automaticPrecision(t){this.allowAutomaticPrecision&&(this._automaticPrecision=t,this.checkAutomaticPrecision())}get autoscaleFromZero(){return this._autoscaleFromZero}set autoscaleFromZero(t){this._autoscaleFromZero=t,this.emit("autoscale-from-zero-changed",t)}get calcCoefficients(){return this._calcCoefficients}set calcCoefficients(t){this._calcCoefficients=t,this.emit("calc-coefficients-changed",t)}get calcDependentGroups(){return this._calcDependentGroups}set calcDependentGroups(t){this._calcDependentGroups=t,this.emit("calc-dependent-groups-changed",t)}get calcEquation(){return this._calcEquation}get customEq(){return this._customEq}set calcEquation(t){this._calcEquation=t,this.emit("calc-equation-changed",t)}set customEq(t){this._customEq=t}get calcUserEditable(){return this._calcUserEditable}set calcUserEditable(t){this._calcUserEditable=t,this.emit("calc-user-editable-changed",t)}get columns(){return(this._getAllColumnsFn||(()=>[]))(this).filter(e=>!e.special)}get color(){return this._color}get deletable(){return this._deletable}set deletable(t){this._deletable=t,this.emit("deletable-changed",t)}get direction(){return this._direction}set direction(t){this._direction=t,this.emit("direction-changed",t)}get editable(){return this._editable}set editable(t){this._editable=t,this.emit("editable-changed",t)}get errorBarColumnId(){return this._errorBarColumnId}set errorBarColumnId(t){this._errorBarColumnId=t,this.emit("error-bar-column-id-changed",{group:this,columnId:t})}get errorBarType(){return this._errorBarType??p.None}set errorBarType(t){this._errorBarType=t??p.None,this.emit("error-bar-type-changed",{group:this,type:this._errorBarType})}get errorBarValue(){return this._errorBarValue}set errorBarValue(t){this._errorBarValue=t,this.emit("error-bar-value-changed",{group:this,value:t})}get id(){return this._id}get isUserCreated(){return this.calcUserEditable||this.type==="manual"}get metered(){return this._metered}set metered(t){this._metered=t,this.emit("metered-changed",t)}get meterId(){return this._meterId}set meterId(t){this._meterId=t}get name(){let t=this._name,e=this._wavelength;return e&&!t.includes(` @ ${e} nm`)&&(t=`${t} @ ${e} nm`),t}set name(t){let e=this._name;this._name=t,this.emit("name-changed",t,e)}get plotted(){return this._plotted}set plotted(t){this._plotted=t,this.emit("plotted-changed",t)}get precision(){return this._precision}get prefersBase(){return this._prefersBase}set prefersBase(t){this._prefersBase=t,this.emit("prefers-base-changed",t)}get range(){return this._range}set range(t){this._range=t,this.emit("range-changed",t)}get replaceDependent(){return this._replaceDependent}set replaceDependent(t){this._replaceDependent=t,this.emit("replace-dependent-changed",t)}get sensorMapId(){return this._sensorMapId}set sensorMapId(t){this._sensorMapId=t,this.emit("sensor-map-id-changed",t)}get sensorId(){return this._sensorId}set sensorId(t){this._sensorId=t,this.emit("sensor-id-changed",t)}get smaxy(){return this._smaxy}set smaxy(t){this._smaxy=t,this.emit("smaxy-changed",t)}get type(){return this._type}get units(){return this._units}set units(t){this._units=t,this.emit("units-changed",t)}get wavelength(){return this._wavelength}set wavelength(t){this._wavelength=t,this.name=this._name}get isSpectrumGroup(){return this.allColumns&&this.allColumns.every(t=>t.dataSet)?this.allColumns.every(t=>t.dataSet.type==="spectrum"):!1}checkAutomaticPrecision(){!this.automaticPrecision||(this.precision.precision=this.getHighestPrecision())}getHighestPrecision(){let t=i=>i.values.map(s=>m.getPrecision(s)).reduce((s,n)=>n>s?n:s,0);return this.columns.map(t).reduce((i,r)=>r>i?r:i,0)}getFormattedValue(t){let e=f(this.precision.formatStr,t);return e=m.checkNegativeZero(t,e),e}getNameUnits(){let t=this.units?`(${this.units})`:"";return`${this.name} ${t}`}update(t){let e=(n,o)=>{this[n]!==o&&(this[n]=o)},i=({precision:n,useSigFigs:o,useSciNotation:l},h)=>{this._automaticPrecision=h;let a={precision:h?this.getHighestPrecision():n,useSigFigs:o,useSciNotation:l};this.precision.update(a)};["autoscaleFromZero","calcEquation","calcEquationStr","calcUserEditable","customEq","direction","deletable","errorBarColumnId","errorBarType","errorBarValue","metered","meterId","name","plotted","prefersBase","replaceDependent","smaxy","sensorId","sensorMapId","units","wavelength"].forEach(n=>{n in t&&e(n,t[n])}),t.color&&(this._color=t.color),t.formatStr&&(this._formatStr=t.formatStr),["calcDependentGroups","calcCoefficients","range"].forEach(n=>{n in t&&e(n,t[n])});let{precision:r}=this,{automaticPrecision:s}=this;"precision"in t&&(r=t.precision),"automaticPrecision"in t&&(s=t.automaticPrecision),i(r,s)}};export{j as a,G as b,z as c,p as d,O as e};
