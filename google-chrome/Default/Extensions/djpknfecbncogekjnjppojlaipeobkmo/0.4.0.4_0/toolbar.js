(()=>{"use strict";var e={5326:(e,t)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.protectPage=void 0;t.protectPage=(e,t,o)=>{document.addEventListener("contextmenu",(e=>{e.preventDefault()}));const n=window.parent===window;var r=null,s=!1,i=!1;const l=()=>{a(),document.body.innerHTML="",y("The extension has been uninstalled which is not permitted."),setTimeout((()=>{window.location.href=window.origin}),4e3)},a=()=>{const e=document.cookie.split(";");for(let t=0;t<e.length;t++){const o=e[t],n=o.indexOf("=");let r=n>-1?o.substr(0,n):o;document.cookie=r+="=;expires=Thu, 01 Jan  1970 00:00:00 GMT;path=/"}},d=()=>{navigator.clipboard.readText().then((t=>{0===t.length&&(navigator.clipboard.writeText(" "),s=!0,y(e.screenshot_warning),chrome.runtime.sendMessage("screenshotdetected",(t=>{t.screenshotCount>1&&(i=!0,y(e.screenshot_exit),setTimeout((()=>{chrome.runtime.sendMessage({action:"earlyexit"})}),5e3))})))}))},c=(e,t)=>{t&&window.location.href.includes(t)&&navigator.permissions.query({name:"clipboard-write"}).then((e=>{"granted"===e.state&&((()=>{try{for(let e=1;e<11;e++)navigator.clipboard.writeText(" ".repeat(e))}catch(e){}})(),n&&navigator.permissions.query({name:"clipboard-read"}).then((e=>{"granted"===e.state&&setInterval(d,3e3)})))}))},y=e=>{r&&r.remove(),(r=document.createElement("div")).style.backgroundColor="#efefef",r.style.position="fixed",r.style.width="100%",r.style.top="0",r.style.left="0",r.style.zIndex="1000",r.style.height="100%";const t=document.createElement("p");t.style.textAlign="left",t.style.position="absolute",t.style.top="200px",t.style.left="40px",t.style.fontFamily="verdana",t.style.fontSize="24px",t.style.wordWrap="break-word",t.style.whiteSpace="normal",t.style.color="black",t.style.lineHeight="1",e&&(t.innerHTML=e),r.appendChild(t),document.body.appendChild(r)},p=()=>{r&&!i&&(r.remove(),r=null)},u=(t,o,n)=>{"focuslost"===t.action&&y(e.focus_lost_warning),"signalcheck"===t.action&&n("response")},m=t=>{"showoverlay"===t.data&&y(),"hideoverlay"===t.data&&p(),"showoverlay-ctrlalt"===t.data&&y(e.ctrl_alt_shift_warning)},h=t=>{!t.ctrlKey||t.shiftKey||t.altKey||(n?y():window.parent.postMessage("showoverlay","*")),t.ctrlKey&&t.shiftKey&&(t.preventDefault(),s=!0,n?y(e.ctrl_alt_shift_warning):window.parent.postMessage("showoverlay-ctrlalt","*")),t.ctrlKey&&t.altKey&&(t.preventDefault(),s=!0,n?y(e.ctrl_alt_shift_warning):window.parent.postMessage("showoverlay-ctrlalt","*")),t.ctrlKey&&"p"===t.key&&t.preventDefault(),t.ctrlKey&&"s"===t.key&&t.preventDefault(),t.ctrlKey&&"w"===t.key&&t.preventDefault(),"Escape"===t.key&&(s=!1,n?p():window.parent.postMessage("hideoverlay","*"))},g=e=>{"Control"!==e.key||s||(n?p():window.parent.postMessage("hideoverlay","*"))};document&&(document.addEventListener("keydown",h),document.addEventListener("keyup",g)),n&&(window.addEventListener("message",m),chrome.runtime.onMessage.addListener(u)),document&&document.addEventListener("contextmenu",(e=>{e.preventDefault()})),t&&c(0,o),setInterval((()=>{chrome.runtime.id||l()}),5e3),history.pushState(null,"",location.href),window.onpopstate=()=>{history.go(1)}}},7068:function(e,t,o){var n=this&&this.__awaiter||function(e,t,o,n){return new(o||(o=Promise))((function(r,s){function i(e){try{a(n.next(e))}catch(e){s(e)}}function l(e){try{a(n.throw(e))}catch(e){s(e)}}function a(e){var t;e.done?r(e.value):(t=e.value,t instanceof o?t:new o((function(e){e(t)}))).then(i,l)}a((n=n.apply(e,t||[])).next())}))};Object.defineProperty(t,"__esModule",{value:!0});const r=o(6185),s=o(5326);chrome.storage.local.get("systemState",(e=>n(void 0,void 0,void 0,(function*(){let t=(0,r.geti18nMessages)(["screenshot_warning","screenshot_exit","focus_lost_warning","ctrl_alt_shift_warning","secondary_display_exit","dev_tool_exit","continue_to_exit","continue","yes","no","enter","dismiss"]);e.systemState.overrideLocale&&(t=yield(0,r.overrideLocale)(t,e.systemState.overrideLocale)),(0,s.protectPage)(t,!1,e.systemState.examUrl);var o=(0,r.geti18nMessages)(["exit_confirm","yes","no","proctor_password","enter","dismiss","incorrect_password","calculator","exam_link","link_blocked"]);e.systemState.overrideLocale&&(o=yield(0,r.overrideLocale)(o,e.systemState.overrideLocale));const n=yield chrome.runtime.sendMessage("gettabid"),i=e.systemState.examTabTitle,l=e.systemState.calculatorTabId,a=e.systemState.tabIds,d=e.systemState.examTabId,c=e.systemState.calculator>0,y=e.systemState.earlyExit,p=!!e.systemState.proctorExitPassword,u=document.createElement("div");u.id="ldbtoolbar",u.style.width="100%",u.style.backgroundColor="#5A5A5A",u.style.height="54px",u.style.maxHeight="54px",u.style.position="fixed",u.style.top="0px",u.style.left="0px",u.style.zIndex="9999999";const m=document.createElement("ul");m.id="tablist",m.style.listStyleType="none",m.style.display="flex",m.style.position="absolute",m.style.margin="0",m.style.padding="0";const h=(e,t,n,r,s)=>{const i=document.createElement("li");i.addEventListener("click",(t=>{const o=t.currentTarget;"exit-tab"===t.target.id?chrome.runtime.sendMessage({action:"removetab",tabId:e}):o.id===e.toString()&&chrome.runtime.sendMessage({action:"activatetab",tabId:e})})),i.id=e.toString(),i.style.minWidth="175px",i.style.height="51px",i.style.textAlign="left",t===e?(i.style.backgroundColor="white",i.style.color="#4a4a4a"):(i.style.cursor="pointer",i.style.color="white"),t===n&&i.classList.add("exam-tab"),i.style.fontFamily="Arial",i.style.fontSize="medium",i.style.border="solid",i.style.borderColor="gray",i.style.borderWidth="1px",i.style.lineHeight="52px",i.style.userSelect="none";const l=document.createElement("span");l.id="tab-title",l.textContent=s||(e===n?"Exam":e===r?o.calculator:o.exam_link),l.style.paddingLeft="16px",l.style.paddingRight="16px",i.appendChild(l);const a=document.createElement("button");return a.id="exit-tab",a.style.backgroundImage=`url(${chrome.runtime.getURL("/assets/images/close-tab.png")}`,a.style.height="15px",a.style.float="right",a.style.marginTop="18px",a.style.marginRight="20px",a.style.marginLeft="10px",a.style.width="20px",a.style.backgroundColor="#5A5A5A",a.style.backgroundSize="cover",a.style.border="none",a.style.borderRadius="3px",a.style.cursor="pointer",n!==e&&i.appendChild(a),i};if(m.append(h(d,n,d,l,i)),a)for(const e of a)m.appendChild(h(e,n,d,l));const g=document.createElement("button");g.addEventListener("click",(e=>{chrome.runtime.sendMessage({action:"calculator"})})),g.style.backgroundImage=`url(${chrome.runtime.getURL("/assets/images/calculator-light.png")}`,g.id="calculator",g.style.float="right",g.style.backgroundSize="cover",g.style.backgroundPosition="center",g.style.width="20px",g.style.height="26px",g.style.border="none",g.style.marginTop="13px",g.style.marginRight="20px",g.style.cursor="pointer",g.style.backgroundColor="#5A5A5A";const x=document.createElement("div");x.style.position="absolute",x.style.width="350px",x.style.height="40px",x.style.backgroundColor="#5A5A5A",x.textContent="Are you sure you want to exit?",x.style.color="white",x.style.lineHeight="52px",x.style.fontFamily="Arial",x.style.fontSize="medium",x.style.zIndex="10",x.style.top="0",x.style.right="0";const v=document.createElement("button");v.addEventListener("click",(()=>{chrome.runtime.sendMessage({action:"earlyexit"})})),v.id="exit-yes-button",v.textContent=o.yes,v.style.borderRadius="6px",v.style.height="40px",v.style.border="none",v.style.color="white",v.style.padding="5px 14px 5px 14px",v.style.backgroundColor="#387DA6",v.style.marginLeft="15px",v.style.cursor="pointer",v.style.fontFamily="Arial",v.style.fontSize="medium",x.appendChild(v);const b=document.createElement("button");b.textContent=o.no,b.addEventListener("click",(e=>{u.removeChild(x)})),b.id="exit-no-button",b.style.borderRadius="6px",b.style.height="40px",b.style.border="none",b.style.color="white",b.style.padding="5px 14px 5px 14px",b.style.backgroundColor="#387DA6",b.style.marginLeft="5px",b.style.cursor="pointer",b.style.fontFamily="Arial",b.style.fontSize="medium",x.appendChild(b);const f=document.createElement("div");f.style.position="absolute",f.style.width="450px",f.style.height="40px",f.style.backgroundColor="#5A5A5A",f.textContent=o.proctor_password,f.style.color="white",f.style.lineHeight="52px",f.style.fontFamily="Arial",f.style.fontSize="medium",f.style.zIndex="10",f.style.top="0",f.style.right="0";const w=document.createElement("input");w.id="exit-password-input",w.style.borderRadius="6px",w.style.height="35px",w.style.width="120px",w.type="password",w.style.border="none",w.style.fontSize="18px",w.style.marginLeft="15px",w.style.padding="0px 10px 0px 10px",f.appendChild(w);const L=document.createElement("button");L.addEventListener("click",(()=>{w.value.length>0&&chrome.runtime.sendMessage({action:"password",password:w.value})})),L.id="exit-enter-button",L.textContent=o.enter,L.style.borderRadius="6px",L.style.height="40px",L.style.border="none",L.style.color="white",L.style.padding="5px 14px 5px 14px",L.style.backgroundColor="#387DA6",L.style.marginLeft="10px",L.style.cursor="pointer",L.style.fontFamily="Arial",f.appendChild(L);const k=document.createElement("button");k.addEventListener("click",(e=>{u.removeChild(f)})),k.id="exit-dismiss-button",k.textContent=o.dismiss,k.style.borderRadius="6px",k.style.height="40px",k.style.border="none",k.style.color="white",k.style.padding="5px 14px 5px 14px",k.style.backgroundColor="#387DA6",k.style.marginLeft="10px",k.style.cursor="pointer",k.style.fontFamily="Arial",f.appendChild(k);const C=document.createElement("span");C.id="exit-password-error",C.style.border="solid",C.style.borderRadius="6px",C.style.backgroundColor="#ebd2d5",C.textContent=o.incorrect_password,C.style.color="#ae0015",C.style.marginLeft="15px",C.style.padding="5px 10px 5px 10px",C.style.lineHeight="40px",C.style.fontFamily="Arial",C.style.fontSize="medium";var _="URL";const A=document.createElement("span");A.addEventListener("click",(()=>{A.textContent===o.link_blocked?A.textContent=_:u.removeChild(A)})),A.id="blocked-url",A.style.position="absolute",A.style.zIndex="10",A.style.top="0",A.style.right="100px",A.style.border="solid",A.style.borderRadius="6px",A.style.backgroundColor="#ebd2d5",A.textContent=o.link_blocked,A.style.color="#ae0015",A.style.marginLeft="15px",A.style.padding="3px 5px 3px 5px",A.style.lineHeight="40px",A.style.fontFamily="Arial",A.style.fontSize="medium";const E=document.createElement("button");E.addEventListener("click",(e=>{y?u.appendChild(x):p&&u.appendChild(f)})),E.style.backgroundImage=`url(${chrome.runtime.getURL("/assets/images/x-square.png")}`,E.id="exit-button",E.style.float="right",E.style.backgroundSize="cover",E.style.backgroundPosition="center",E.style.width="30px",E.style.height="30px",E.style.borderRadius="6px",E.style.border="none",E.style.marginTop="10px",E.style.marginRight="10px",E.style.cursor="pointer",u.appendChild(E),c&&u.appendChild(g),u.appendChild(m),document.body.appendChild(u),chrome.runtime.onMessage.addListener(((e,t,r)=>{if("newtab"===e.action&&m.appendChild(h(e.newTabId,n,d,l,e.newTabTitle)),"removetab"===e.action&&document){const t=document.getElementById(e.tabId);t&&m.removeChild(t)}"invalidpassword"===e.action&&(f.replaceChild(C,w),w.value="",setTimeout((()=>{f.replaceChild(w,C),u.removeChild(f)}),4e3)),"blockedurlerror"===e.action&&(_=e.url,A.textContent=o.link_blocked,u.appendChild(A)),"toolbarsignalcheck"==e.action&&r("response")}))}))))},6185:function(e,t){var o=this&&this.__awaiter||function(e,t,o,n){return new(o||(o=Promise))((function(r,s){function i(e){try{a(n.next(e))}catch(e){s(e)}}function l(e){try{a(n.throw(e))}catch(e){s(e)}}function a(e){var t;e.done?r(e.value):(t=e.value,t instanceof o?t:new o((function(e){e(t)}))).then(i,l)}a((n=n.apply(e,t||[])).next())}))};Object.defineProperty(t,"__esModule",{value:!0}),t.getChromeVersion=t.getAllTabs=t.parseParentheticalList=t.getTranslation=t.overrideLocale=t.geti18nMessages=t.getGLobalServer=t.resetLaunchTab=t.combineTabsToWindow=t.containsDomainPattern=t.containsAllowedDomains=t.containsUrlPattern=t.getArrayFromUrlParam=t.getDomainUrlFromURL=t.extractXML=t.cleanHistory=t.cleanLDBHistory=t.removeLDBCookies=t.removeLMSCookies=t.setCookie=t.isLaunchUrl=void 0;t.isLaunchUrl=(e,t)=>o(void 0,void 0,void 0,(function*(){return!!e.includes(`ldb1:${t}`)}));t.setCookie=(e,t,n)=>o(void 0,void 0,void 0,(function*(){try{const o=new URL(t);["http:","https:"].includes(o.protocol)&&(yield chrome.cookies.set({name:e,url:o.origin,value:n}))}catch(e){}}));t.removeLMSCookies=e=>o(void 0,void 0,void 0,(function*(){const t=new URL(e),o=yield chrome.cookies.getAll({url:t.origin});for(const e of o)yield chrome.cookies.remove({name:e.name,url:t.origin})}));t.removeLDBCookies=()=>o(void 0,void 0,void 0,(function*(){const e=["rldbcv","rldbacv","rldbrv","rldbarv","rldbswipe","rldbsi","rldbci"];for(const t of e){const e=yield chrome.cookies.getAll({name:t});for(const t of e)yield chrome.cookies.remove({name:t.name,url:`https://${t.domain}`})}}));t.cleanLDBHistory=(e,t)=>o(void 0,void 0,void 0,(function*(){(e.includes(t)||e.includes(chrome.runtime.id))&&chrome.history.deleteUrl({url:e})}));t.cleanHistory=e=>o(void 0,void 0,void 0,(function*(){yield chrome.history.deleteRange({startTime:e,endTime:Date.now()})}));t.extractXML=(e,t)=>{const o=new RegExp(`<${e}>(.*?)</${e}>`),n=t.match(o);return n?n[1]:null};t.getDomainUrlFromURL=e=>{try{return new URL(e).origin}catch(e){}return null};t.getArrayFromUrlParam=(e,t)=>{const o=new URL(e);var n=o.searchParams,r=o.hash.indexOf("?");0===n.size&&-1!==r&&(n=new URLSearchParams(o.hash.slice(r)));const s=n.get(t);return s&&s.startsWith("(")&&s.endsWith(")")?s.slice(1,-1).split(",").map((e=>e.trim())):[]};t.containsUrlPattern=(e,t)=>{for(const o of t){const t=o.replace(/[.*+?^${}()|[\]\\]/g,"\\$&").replace(/\*/g,".*");if(new RegExp(t).test(e))return!0}return!1};t.containsAllowedDomains=(e,t)=>{var o=!1;try{var n=new URL(e).host;let t=n.split(".");t.length>1&&(n=t.slice(-2).join("."))}catch(e){return!1}return t.forEach((e=>{e.split(".").length>1&&(e=e.split(".").splice(-2).join(".")),n==e&&(o=!0)})),o};t.containsDomainPattern=(e,t)=>{try{const o=new URL(e).hostname;for(const e of t){const t=e.replace(/\./g,"\\.").replace(/\*/g,".*");if(new RegExp(`^${t}$`).test(o))return!0}return!1}catch(e){return!1}};t.combineTabsToWindow=e=>o(void 0,void 0,void 0,(function*(){const t=yield chrome.windows.getLastFocused();for(const o of e)yield chrome.tabs.move(o,{windowId:t.id,index:-1})}));t.resetLaunchTab=(e,t,n,r,s)=>o(void 0,void 0,void 0,(function*(){r&&t.includes(n)&&(r=s),r&&(yield chrome.tabs.update(e,{url:r,active:!1}))}));t.getGLobalServer=()=>o(void 0,void 0,void 0,(function*(){const e=yield chrome.runtime.sendMessage({action:"getGlobalServer"});try{return new URL(e.globalServer),e.globalServer}catch(e){return null}}));t.geti18nMessages=e=>{let t={};for(const o of e)t[o]=chrome.i18n.getMessage(o);return t};t.overrideLocale=(e,t)=>o(void 0,void 0,void 0,(function*(){const o="_locales/"+t+"/messages.json",n=yield(yield fetch(chrome.runtime.getURL(o))).json();for(const t of Object.keys(e))e[t]=n[t].message;return e}));t.getTranslation=(e,t)=>o(void 0,void 0,void 0,(function*(){if(t){const o="_locales/"+t+"/messages.json";return(yield(yield fetch(chrome.runtime.getURL(o))).json())[e].message}return chrome.i18n.getMessage(e)}));t.parseParentheticalList=e=>(e&&(e=(e=e.replace(/[()]| /g,"")).toLowerCase()),e?e.split(","):[]);t.getAllTabs=()=>o(void 0,void 0,void 0,(function*(){return yield chrome.tabs.query({})}));t.getChromeVersion=()=>{var e;try{const t=null===(e=navigator.userAgent.match(/Chrome\/([\d.]+)/))||void 0===e?void 0:e[1];if(t)return parseFloat(t)}catch(e){}return null}}},t={};(function o(n){var r=t[n];if(void 0!==r)return r.exports;var s=t[n]={exports:{}};return e[n].call(s.exports,s,s.exports,o),s.exports})(7068)})();